<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"></meta>
		<script src="common/firebase.js" type="module"></script>
		<script src="match/logic.js"></script>
		<style>
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
				width: 100%;
				background-color: #003;
				font-family: sans-serif;
			}
			body {
			}
		</style>
	</head>
	<body>
		<button>Make New</button>
		<div></div>
		<script>
			function randKey(size) {
				const bytes = new Uint8Array(size);
				window.crypto.getRandomValues(bytes);
				return bytes.reduce((o, v) => o + ('00' + v.toString(16)).slice(-2), '');
			}

			document.querySelector("button").addEventListener("click", () => {
				let key = randKey(8);
				db.ref('matches/' + key).set(new Game().toJSON());
				let a = document.createElement("a");
				a.setAttribute("href", "match.html?match=" + key);
				a.appendChild(document.createTextNode(key));
				document.querySelector("div").appendChild(a);
			});
		</script>
	</body>
</html>
