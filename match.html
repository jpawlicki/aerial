<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"></meta>
		<script src="common/firebase.js" type="module"></script>
		<script src="common/skills.js"></script>
		<script src="match/render.js"></script>
		<script src="match/control.js"></script>
		<script src="match/logic.js"></script>
		<style>
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
				width: 100%;
				background-color: #003;
				font-family: sans-serif;
			}
			body {
				display: grid;
				grid-template-rows: min-content 1fr;
				grid-template-columns: min-content 1fr;
			}
			#menu {
				background-color: #ddd;
				grid-row: 1;
				grid-column: 2;
			}
			#control {
				grid-row: 2;
				grid-column: 2;
				background-color: #ddf;
			}
			#control > :nth-child(1), #control > :nth-child(2), .iconbar {
				background-color: #fff;
			}
			#field {
				grid-row: 1 / 3;
				grid-column: 1;
				height: 100vh;
			}
			.iconbar {
				display: flex;
				justify-content: space-around;
				border-bottom: 2px solid black;
			}
			.iconbar > svg {
				height: 5em;
				width: 5em;
				cursor: pointer;
			}
			.iconbar > svg > image {
				clip-path: path('M0 .5A.5 .5 0 0 1 1 .5L1 .5A.5 .5 0 0 1 .5 1L.5 1A.5 .5 0 0 1 0 .5Z');
				transform: scale(0.9);
				transform-origin: center;
				transition: 0.2s;
				filter: grayscale(0.8);
				opacity: 0.8;
			}
			.iconbar > svg > image:hover {
				transform: scale(0.93);
				filter: grayscale(0.5);
				opacity: 0.85;
			}
			.iconbar > svg.active > image {
				clip-path: path('M0 .5A.5 .5 0 0 1 1 .5L1 1A0 0 0 0 1 1 1L0 1A0 0 0 0 1 0 1Z');
				transform: scale(1);
				filter: grayscale(0);
				opacity: 1;
			}
			.action {
				fill: rgba(255, 255, 255, 0.2);
				stroke: #000;
				stroke-width: 0.02;
			}
			.action:hover {
				fill: #88f;
			}
			.optionsblock {
				padding: 0.5em;
			}
			.skillblock {
				display: flex;
				text-transform: capitalize;
				border: 1px solid #ccc;
				background-color: #eef;
				border-radius: 1em;
				margin-top: 0.2em;
				padding-left: 0.5em;
			}
			.optionsblock > svg {
				height: 5em;
			}
		</style>
	</head>
	<body>
		<div id="menu"></div>
		<div id="control"></div>
		<svg id="field"></svg>
		<script>
			let teams = [
				new Team("#fc0", "#333", "Fire Ferrets"),
				new Team("#333", "#f00", "Wolfbats"),
			];
			let field = new Field();
			let g_game = 
					new Game(
							field,
							teams,
							[
								[
									new Aerial([0, 4], [1, 0], Math.floor(Math.random() * 80) + ".png", "Jack", teams[0], [Skill.SKILL_LIFT, Skill.SKILL_DROP, Skill.SKILL_FLY, Skill.SKILL_GLIDE, Skill.SKILL_SOAR], [], 6),
									new Aerial([0, 3], [1, 0], Math.floor(Math.random() * 80) + ".png", "Jane", teams[0], [Skill.SKILL_LIFT, Skill.SKILL_DROP, Skill.SKILL_FLY], [], 6),
								],
								[
									new Aerial([field.width - 1, 4], [-1, 0], Math.floor(Math.random() * 80) + ".png", "Evil Jack", teams[1], [], [], 6),
									new Aerial([field.width - 1, 3], [-1, 0], Math.floor(Math.random() * 80) + ".png", "Evil Jane", teams[1], [], [], 6),
								],
							]);
			let controller = new Controller(g_game);
			let g =
					new GameActor(
							g_game,
							0,
							controller,
							document.getElementById("field"),
							document.getElementById("control"));
		</script>
	</body>
</html>
